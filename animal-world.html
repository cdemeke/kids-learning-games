<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Animal World Explorer - Where Do They Live?</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@500;600;700;800&family=Permanent+Marker&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        body {
            font-family: 'Outfit', sans-serif;
            min-height: 100vh;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            overflow-x: hidden;
        }

        .game-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }

        /* Header */
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .game-title {
            font-family: 'Permanent Marker', cursive;
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            color: #fff;
            text-shadow: 0 0 20px rgba(255, 200, 100, 0.5);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .game-title .globe {
            animation: spin 20s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .stats-bar {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .stat-box {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 15px;
            color: white;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stat-box .value {
            color: #ffd700;
            font-size: 1.2rem;
            font-weight: 800;
        }

        .stat-box.streak .value {
            color: #ff6b6b;
        }

        .stat-box.timer .value {
            color: #4ecdc4;
            font-family: monospace;
        }

        /* Main game area */
        .game-area {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 20px;
            align-items: start;
        }

        @media (max-width: 1000px) {
            .game-area {
                grid-template-columns: 1fr;
            }
        }

        /* World Map */
        .map-container {
            background: linear-gradient(180deg, #1e3c72 0%, #2a5298 50%, #1e3c72 100%);
            border-radius: 20px;
            padding: 20px;
            border: 3px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            position: relative;
            overflow: hidden;
        }

        .map-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            pointer-events: none;
        }

        .world-map {
            width: 100%;
            height: auto;
            display: block;
        }

        .continent {
            cursor: pointer;
            transition: all 0.3s ease;
            filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.3));
        }

        .continent:hover {
            filter: brightness(1.3) drop-shadow(0 0 15px rgba(255, 255, 255, 0.5));
            transform: scale(1.02);
        }

        .continent.correct {
            animation: correctPulse 0.5s ease;
        }

        @keyframes correctPulse {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(2) drop-shadow(0 0 30px #4ecdc4); }
        }

        .continent.wrong {
            animation: wrongShake 0.5s ease;
        }

        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-10px); }
            40%, 80% { transform: translateX(10px); }
        }

        .continent.highlight {
            animation: highlightPulse 1s ease-in-out infinite;
        }

        @keyframes highlightPulse {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.5) drop-shadow(0 0 20px rgba(255, 215, 0, 0.8)); }
        }

        /* Continent colors */
        .north-america { fill: #45B7D1; }
        .south-america { fill: #96CEB4; }
        .europe { fill: #DDA0DD; }
        .africa { fill: #F7DC6F; }
        .asia { fill: #F1948A; }
        .oceania { fill: #82E0AA; }
        .antarctica { fill: #D5DBDB; }

        /* Side Panel */
        .side-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Animal Card */
        .animal-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            border: 3px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .animal-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 3s linear infinite;
        }

        @keyframes shimmer {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .animal-card-content {
            position: relative;
            z-index: 1;
        }

        .animal-label {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 10px;
        }

        .animal-emoji {
            font-size: 5rem;
            display: block;
            margin: 15px 0;
            animation: animalBounce 2s ease-in-out infinite;
            filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.3));
        }

        @keyframes animalBounce {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-10px) scale(1.05); }
        }

        .animal-name {
            font-family: 'Permanent Marker', cursive;
            font-size: 1.8rem;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            margin-bottom: 8px;
        }

        .animal-hint {
            font-size: 0.95rem;
            color: rgba(255, 255, 255, 0.9);
            font-style: italic;
            line-height: 1.4;
        }

        .question-number {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.3);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            color: white;
        }

        /* Fact Card */
        .fact-card {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            border-radius: 20px;
            padding: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            display: none;
        }

        .fact-card.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(50px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .fact-card h3 {
            color: white;
            font-size: 1.1rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .fact-card p {
            color: rgba(255, 255, 255, 0.95);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Progress Bar */
        .progress-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .progress-label {
            color: white;
            font-size: 0.9rem;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }

        .progress-bar {
            height: 12px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #f093fb, #f5576c);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        /* Continent Labels on map */
        .continent-label {
            position: absolute;
            color: white;
            font-size: 0.75rem;
            font-weight: 700;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
            pointer-events: none;
            opacity: 0.8;
        }

        /* Difficulty Selector */
        .mode-selector {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .mode-selector h4 {
            color: white;
            font-size: 0.9rem;
            margin-bottom: 12px;
        }

        .mode-buttons {
            display: flex;
            gap: 8px;
        }

        .mode-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 10px;
            font-family: 'Outfit', sans-serif;
            font-weight: 600;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .mode-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        /* Achievements */
        .achievements {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .achievements h4 {
            color: white;
            font-size: 0.9rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .badges {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .badge {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            filter: grayscale(1) opacity(0.4);
            transition: all 0.3s ease;
        }

        .badge.unlocked {
            filter: none;
            animation: badgeUnlock 0.5s ease;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        @keyframes badgeUnlock {
            0% { transform: scale(0) rotate(-180deg); }
            70% { transform: scale(1.3) rotate(10deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        .badge[title]:hover::after {
            content: attr(title);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.75rem;
            white-space: nowrap;
        }

        /* Overlay Screens */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }

        .overlay.hidden {
            display: none;
        }

        .overlay-content {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 30px;
            padding: 40px;
            text-align: center;
            max-width: 500px;
            width: 100%;
            border: 3px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.5);
        }

        .overlay-content h2 {
            font-family: 'Permanent Marker', cursive;
            font-size: 2.5rem;
            color: white;
            margin-bottom: 10px;
        }

        .overlay-content .subtitle {
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.1rem;
            margin-bottom: 30px;
        }

        .overlay-content .big-emoji {
            font-size: 6rem;
            display: block;
            margin: 20px 0;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        .final-score {
            font-size: 4rem;
            font-weight: 800;
            color: #ffd700;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
            margin: 20px 0;
        }

        .final-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 25px 0;
        }

        .final-stat {
            text-align: center;
        }

        .final-stat .label {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.85rem;
        }

        .final-stat .value {
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 50px;
            font-size: 1.3rem;
            font-family: 'Outfit', sans-serif;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.5);
        }

        .btn-secondary {
            background: transparent;
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 12px 30px;
            font-size: 1rem;
            font-family: 'Outfit', sans-serif;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Home button */
        .home-btn {
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 100;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 10px 18px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .home-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }

        /* Sound toggle */
        .sound-toggle {
            position: fixed;
            top: 15px;
            right: 15px;
            z-index: 100;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .sound-toggle:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        .sound-toggle.muted {
            opacity: 0.5;
        }

        /* Combo popup */
        .combo-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Permanent Marker', cursive;
            font-size: 3rem;
            color: #ffd700;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
            pointer-events: none;
            z-index: 500;
            opacity: 0;
        }

        .combo-popup.show {
            animation: comboShow 1s ease-out forwards;
        }

        @keyframes comboShow {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 1; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            100% { transform: translate(-50%, -70%) scale(1); opacity: 0; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .game-container {
                padding: 15px;
            }

            .game-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .stat-box {
                padding: 8px 12px;
                font-size: 0.9rem;
            }

            .animal-emoji {
                font-size: 4rem;
            }

            .animal-name {
                font-size: 1.5rem;
            }

            .overlay-content {
                padding: 25px;
            }

            .overlay-content h2 {
                font-size: 2rem;
            }

            .overlay-content .big-emoji {
                font-size: 4rem;
            }

            .final-score {
                font-size: 3rem;
            }
        }

        /* Leaderboard */
        .leaderboard {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            max-height: 200px;
            overflow-y: auto;
        }

        .leaderboard h4 {
            color: white;
            font-size: 0.9rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .leaderboard-entry {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            margin-bottom: 5px;
            color: white;
            font-size: 0.9rem;
        }

        .leaderboard-entry:first-child {
            background: linear-gradient(90deg, rgba(255, 215, 0, 0.2), transparent);
        }

        .leaderboard-entry .rank {
            font-weight: 700;
            width: 25px;
        }

        .leaderboard-entry .score {
            color: #ffd700;
            font-weight: 700;
        }

        /* Instructions modal */
        .instructions-list {
            text-align: left;
            color: rgba(255, 255, 255, 0.9);
            margin: 20px 0;
        }

        .instructions-list li {
            margin: 12px 0;
            padding-left: 10px;
            line-height: 1.5;
        }

        .instructions-list li::marker {
            content: 'üåç ';
        }
    </style>
</head>

<body>
    <a href="index.html" class="home-btn">üè† Home</a>
    <button class="sound-toggle" id="soundToggle">üîä</button>

    <div class="game-container">
        <header class="game-header">
            <h1 class="game-title">
                <span class="globe">üåç</span>
                Animal World Explorer
            </h1>
            <div class="stats-bar">
                <div class="stat-box">
                    <span>üèÜ</span>
                    <span>Score:</span>
                    <span class="value" id="score">0</span>
                </div>
                <div class="stat-box streak">
                    <span>üî•</span>
                    <span>Streak:</span>
                    <span class="value" id="streak">0</span>
                </div>
                <div class="stat-box timer">
                    <span>‚è±Ô∏è</span>
                    <span class="value" id="timer">--:--</span>
                </div>
            </div>
        </header>

        <div class="game-area">
            <div class="map-container">
                <svg class="world-map" viewBox="0 0 1000 500" id="worldMap">
                    <!-- Ocean background -->
                    <rect fill="#1e3c72" width="1000" height="500"/>

                    <!-- Greenland (part of North America) -->
                    <path class="continent north-america" id="north-america" d="
                        M 300 25 Q 320 20 345 25 Q 365 30 370 50 Q 375 70 365 85 Q 350 95 330 90 Q 310 85 300 70 Q 290 50 300 25 Z
                        M 40 55 Q 60 45 90 40 Q 130 35 160 45 Q 190 40 210 50 Q 235 45 255 55
                        Q 270 50 280 60 Q 290 55 295 70 Q 300 80 295 95
                        Q 290 110 280 120 Q 275 130 280 145 Q 275 160 265 170
                        Q 255 175 250 185 Q 245 195 235 205 Q 225 215 215 220
                        Q 200 230 185 235 Q 175 245 160 250 Q 145 255 130 252
                        L 125 248 Q 130 240 125 235 Q 115 240 105 238 Q 95 235 90 225
                        Q 80 220 75 210 Q 65 200 60 185 Q 50 170 45 155
                        Q 40 140 35 125 Q 30 110 35 95 Q 32 80 38 65 Q 35 55 40 55 Z
                        M 130 255 Q 145 258 155 270 Q 160 280 150 290 Q 135 295 120 288 Q 110 275 115 265 Q 120 258 130 255 Z
                    "/>

                    <!-- South America -->
                    <path class="continent south-america" id="south-america" d="
                        M 200 275 Q 215 270 230 275 Q 245 278 255 290 Q 265 300 270 315
                        Q 275 335 272 355 Q 270 375 265 390 Q 258 410 250 425
                        Q 240 445 225 460 Q 210 472 195 475 Q 180 472 175 460
                        Q 168 445 170 425 Q 168 405 172 385 Q 175 365 180 345
                        Q 182 325 188 305 Q 192 290 200 275 Z
                    "/>

                    <!-- Europe -->
                    <path class="continent europe" id="europe" d="
                        M 420 45 Q 435 40 450 42 Q 465 38 480 45 Q 490 42 500 48
                        Q 520 45 535 55 Q 548 50 555 60 Q 565 55 570 65
                        Q 575 75 570 85 Q 575 95 568 105 Q 572 115 565 125
                        Q 555 135 545 140 Q 535 148 520 150 Q 505 155 490 158
                        Q 475 162 460 160 Q 445 165 430 160 Q 418 158 410 150
                        Q 400 145 405 135 Q 398 125 405 115 Q 400 105 408 95
                        Q 405 85 412 75 Q 408 65 415 55 Q 415 48 420 45 Z
                        M 430 162 Q 440 168 435 178 Q 428 185 420 180 Q 415 172 420 165 Q 425 162 430 162 Z
                        M 455 165 Q 465 170 462 180 Q 455 188 448 182 Q 445 175 450 168 Q 452 165 455 165 Z
                    "/>

                    <!-- Africa -->
                    <path class="continent africa" id="africa" d="
                        M 430 168 Q 450 165 470 170 Q 490 168 510 175 Q 530 180 540 195
                        Q 552 205 555 220 Q 560 240 558 260 Q 560 280 555 300
                        Q 552 320 545 340 Q 538 360 525 375 Q 510 390 492 398
                        Q 475 405 458 400 Q 442 398 428 390 Q 415 380 408 365
                        Q 400 350 398 332 Q 395 315 398 298 Q 395 280 400 262
                        Q 398 245 405 228 Q 408 210 418 195 Q 425 180 430 168 Z
                    "/>

                    <!-- Asia (main landmass) -->
                    <path class="continent asia" id="asia" d="
                        M 575 35 Q 600 28 630 30 Q 660 25 695 30 Q 730 28 765 35 Q 800 32 835 42
                        Q 865 48 890 60 Q 910 72 925 88 Q 938 105 945 125 Q 950 145 948 165
                        Q 950 180 945 195 Q 942 210 935 222 Q 925 235 910 245 Q 895 255 878 262
                        Q 862 268 845 272 Q 828 275 810 272 Q 792 275 775 270 Q 758 272 742 268
                        Q 725 272 708 265 Q 692 268 678 262 Q 665 265 652 258 Q 640 262 628 255
                        Q 618 258 608 252 Q 598 255 588 248 Q 578 252 570 245 Q 562 240 558 230
                        Q 552 218 555 205 Q 550 192 555 178 Q 552 165 558 152 Q 555 138 562 125
                        Q 558 112 565 100 Q 562 88 570 78 Q 568 68 575 58 Q 572 48 575 35 Z
                        M 628 262 Q 640 268 655 275 Q 668 285 672 300 Q 670 315 658 325 Q 642 332 628 325 Q 615 315 618 300 Q 615 285 622 272 Q 625 265 628 262 Z
                        M 705 272 Q 722 278 738 290 Q 752 305 755 322 Q 752 340 738 352 Q 720 362 702 355 Q 685 345 682 328 Q 680 312 688 298 Q 695 282 705 272 Z
                        M 855 275 Q 875 280 892 295 Q 905 312 902 332 Q 895 350 878 358 Q 858 362 842 352 Q 828 338 832 320 Q 835 302 848 288 Q 852 280 855 275 Z
                    "/>

                    <!-- Oceania/Australia -->
                    <path class="continent oceania" id="oceania" d="
                        M 800 325 Q 825 318 850 322 Q 875 320 898 332 Q 918 345 930 365
                        Q 940 385 938 408 Q 935 430 922 448 Q 905 462 882 468
                        Q 858 472 835 465 Q 815 460 798 448 Q 782 435 775 418
                        Q 768 400 772 382 Q 770 362 780 345 Q 788 332 800 325 Z
                        M 942 355 Q 955 350 965 362 Q 975 375 972 392 Q 968 408 955 418 Q 940 425 928 418 Q 935 405 938 390 Q 940 375 942 355 Z
                        M 960 425 Q 972 422 980 435 Q 985 450 978 462 Q 968 470 955 465 Q 948 455 952 442 Q 955 432 960 425 Z
                    "/>

                    <!-- Antarctica -->
                    <path class="continent antarctica" id="antarctica" d="
                        M 100 478 Q 150 468 220 465 Q 300 462 400 465 Q 500 462 600 465
                        Q 700 462 780 468 Q 850 472 900 480 Q 920 485 920 495 L 920 500 L 80 500 L 80 492
                        Q 85 485 100 478 Z
                    "/>

                    <!-- Continent Labels -->
                    <text x="145" y="155" fill="white" font-size="11" font-weight="bold" opacity="0.7">N. America</text>
                    <text x="195" y="365" fill="white" font-size="11" font-weight="bold" opacity="0.7">S. America</text>
                    <text x="462" y="105" fill="white" font-size="11" font-weight="bold" opacity="0.7">Europe</text>
                    <text x="455" y="290" fill="white" font-size="11" font-weight="bold" opacity="0.7">Africa</text>
                    <text x="735" y="155" fill="white" font-size="11" font-weight="bold" opacity="0.7">Asia</text>
                    <text x="835" y="395" fill="white" font-size="11" font-weight="bold" opacity="0.7">Oceania</text>
                    <text x="480" y="492" fill="white" font-size="10" font-weight="bold" opacity="0.7">Antarctica</text>
                </svg>
            </div>

            <div class="side-panel">
                <!-- Animal Card -->
                <div class="animal-card" id="animalCard">
                    <div class="question-number" id="questionNum">1/15</div>
                    <div class="animal-card-content">
                        <div class="animal-label">Where does this animal live?</div>
                        <span class="animal-emoji" id="animalEmoji">ü¶Å</span>
                        <h2 class="animal-name" id="animalName">Lion</h2>
                        <p class="animal-hint" id="animalHint">The king of the savanna!</p>
                    </div>
                </div>

                <!-- Fact Card -->
                <div class="fact-card" id="factCard">
                    <h3>üß† Fun Fact!</h3>
                    <p id="factText"></p>
                </div>

                <!-- Progress -->
                <div class="progress-container">
                    <div class="progress-label">
                        <span>Progress</span>
                        <span id="progressText">0/15</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Mode Selector -->
                <div class="mode-selector">
                    <h4>üéÆ Game Mode</h4>
                    <div class="mode-buttons">
                        <button class="mode-btn active" data-mode="explorer" id="modeExplorer">Explorer</button>
                        <button class="mode-btn" data-mode="timed" id="modeTimed">Timed</button>
                        <button class="mode-btn" data-mode="expert" id="modeExpert">Expert</button>
                    </div>
                </div>

                <!-- Achievements -->
                <div class="achievements">
                    <h4>üèÖ Achievements</h4>
                    <div class="badges">
                        <div class="badge" id="badge-first" title="First Correct">üåü</div>
                        <div class="badge" id="badge-streak5" title="5 Streak">üî•</div>
                        <div class="badge" id="badge-streak10" title="10 Streak">üí•</div>
                        <div class="badge" id="badge-africa" title="Africa Expert">ü¶Å</div>
                        <div class="badge" id="badge-speed" title="Speed Demon">‚ö°</div>
                        <div class="badge" id="badge-perfect" title="Perfect Round">üëë</div>
                        <div class="badge" id="badge-globe" title="World Explorer">üåç</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Combo Popup -->
    <div class="combo-popup" id="comboPopup"></div>

    <!-- Start Screen -->
    <div class="overlay" id="startScreen">
        <div class="overlay-content">
            <h2>Animal World Explorer</h2>
            <p class="subtitle">Learn where animals live around the world!</p>
            <span class="big-emoji">ü¶Åüê®üêßü¶Öüêº</span>

            <ul class="instructions-list">
                <li>An animal will appear - click the continent where it lives!</li>
                <li>Build streaks for bonus points</li>
                <li>Learn fun facts about each animal</li>
                <li>Unlock achievements as you play</li>
            </ul>

            <div>
                <button class="btn-secondary" data-mode="explorer">üåø Explorer Mode</button>
                <button class="btn-secondary" data-mode="timed">‚è±Ô∏è Timed Challenge</button>
                <button class="btn-secondary" data-mode="expert">üéì Expert Mode</button>
            </div>

            <button class="btn-primary" id="startBtn">Start Exploring!</button>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div class="overlay hidden" id="gameOverScreen">
        <div class="overlay-content">
            <h2 id="gameOverTitle">Great Job!</h2>
            <span class="big-emoji" id="gameOverEmoji">üéâ</span>
            <div class="final-score" id="finalScore">0</div>
            <div class="final-stats">
                <div class="final-stat">
                    <div class="value" id="finalCorrect">0</div>
                    <div class="label">Correct</div>
                </div>
                <div class="final-stat">
                    <div class="value" id="finalStreak">0</div>
                    <div class="label">Best Streak</div>
                </div>
                <div class="final-stat">
                    <div class="value" id="finalAccuracy">0%</div>
                    <div class="label">Accuracy</div>
                </div>
            </div>
            <button class="btn-primary" id="playAgainBtn">Play Again</button>
            <button class="btn-secondary" id="changeModeBtn">Change Mode</button>
        </div>
    </div>

    <script>
        // Audio
        let audioCtx = null;
        let soundEnabled = true;

        function initAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        function playSound(type) {
            if (!soundEnabled || !audioCtx) return;

            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);

            switch(type) {
                case 'correct':
                    osc.type = 'sine';
                    osc.frequency.setValueAtTime(523, audioCtx.currentTime);
                    osc.frequency.setValueAtTime(659, audioCtx.currentTime + 0.1);
                    osc.frequency.setValueAtTime(784, audioCtx.currentTime + 0.2);
                    gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.4);
                    osc.start();
                    osc.stop(audioCtx.currentTime + 0.4);
                    break;
                case 'wrong':
                    osc.type = 'triangle';
                    osc.frequency.setValueAtTime(200, audioCtx.currentTime);
                    osc.frequency.setValueAtTime(150, audioCtx.currentTime + 0.15);
                    gain.gain.setValueAtTime(0.15, audioCtx.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.25);
                    osc.start();
                    osc.stop(audioCtx.currentTime + 0.25);
                    break;
                case 'combo':
                    osc.type = 'sine';
                    osc.frequency.setValueAtTime(600, audioCtx.currentTime);
                    osc.frequency.setValueAtTime(800, audioCtx.currentTime + 0.1);
                    osc.frequency.setValueAtTime(1000, audioCtx.currentTime + 0.2);
                    gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.35);
                    osc.start();
                    osc.stop(audioCtx.currentTime + 0.35);
                    break;
                case 'achievement':
                    osc.type = 'sine';
                    [523, 659, 784, 1047].forEach((freq, i) => {
                        osc.frequency.setValueAtTime(freq, audioCtx.currentTime + i * 0.12);
                    });
                    gain.gain.setValueAtTime(0.25, audioCtx.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.6);
                    osc.start();
                    osc.stop(audioCtx.currentTime + 0.6);
                    break;
                case 'gameover':
                    osc.type = 'sine';
                    osc.frequency.setValueAtTime(400, audioCtx.currentTime);
                    osc.frequency.setValueAtTime(350, audioCtx.currentTime + 0.2);
                    osc.frequency.setValueAtTime(300, audioCtx.currentTime + 0.4);
                    gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.6);
                    osc.start();
                    osc.stop(audioCtx.currentTime + 0.6);
                    break;
            }
        }

        document.getElementById('soundToggle').addEventListener('click', () => {
            soundEnabled = !soundEnabled;
            const btn = document.getElementById('soundToggle');
            btn.textContent = soundEnabled ? 'üîä' : 'üîá';
            btn.classList.toggle('muted', !soundEnabled);
        });

        // Animal data
        const animals = [
            // Africa
            { emoji: 'ü¶Å', name: 'Lion', continent: 'africa', hint: 'The king of the savanna!', fact: 'Lions are the only cats that live in groups called prides. A lion\'s roar can be heard from 5 miles away!' },
            { emoji: 'ü¶í', name: 'Giraffe', continent: 'africa', hint: 'The tallest animal on Earth!', fact: 'Giraffes have the same number of neck bones as humans - just 7! Their tongues are 20 inches long and purple-black.' },
            { emoji: 'ü¶ì', name: 'Zebra', continent: 'africa', hint: 'Famous for black and white stripes!', fact: 'Every zebra has a unique stripe pattern, like human fingerprints. They sleep standing up!' },
            { emoji: 'ü¶è', name: 'Rhinoceros', continent: 'africa', hint: 'Has a big horn on its nose!', fact: 'Rhino horns are made of keratin - the same protein as your fingernails and hair!' },
            { emoji: 'üêò', name: 'African Elephant', continent: 'africa', hint: 'The largest land animal!', fact: 'Elephants can recognize themselves in mirrors and mourn their dead. They\'re one of the smartest animals!' },

            // Asia
            { emoji: 'üêº', name: 'Giant Panda', continent: 'asia', hint: 'Loves eating bamboo!', fact: 'Pandas spend 12 hours a day eating bamboo! They have a special "thumb" that helps them grip bamboo stalks.' },
            { emoji: 'üêÖ', name: 'Tiger', continent: 'asia', hint: 'The largest wild cat!', fact: 'Tigers have striped skin, not just striped fur. No two tigers have the same stripe pattern!' },
            { emoji: 'ü¶ö', name: 'Peacock', continent: 'asia', hint: 'Has beautiful colorful feathers!', fact: 'Only male peacocks have the fancy tail feathers. They can spread them into a fan that\'s 6 feet wide!' },
            { emoji: 'üêâ', name: 'Komodo Dragon', continent: 'asia', hint: 'The world\'s largest lizard!', fact: 'Komodo dragons can eat up to 80% of their body weight in one meal. They have venomous bites!' },
            { emoji: 'ü¶ß', name: 'Orangutan', continent: 'asia', hint: 'A great ape with red hair!', fact: 'Orangutans share 97% of their DNA with humans. They\'re the largest tree-dwelling animals on Earth!' },

            // North America
            { emoji: 'ü¶Ö', name: 'Bald Eagle', continent: 'north-america', hint: 'A symbol of the USA!', fact: 'Bald eagles aren\'t actually bald - their white head feathers make them look that way. They can see fish from a mile away!' },
            { emoji: 'ü¶¨', name: 'Bison', continent: 'north-america', hint: 'The largest North American mammal!', fact: 'Bison can run up to 35 mph and jump 6 feet high! They\'re the national mammal of the United States.' },
            { emoji: 'ü¶ù', name: 'Raccoon', continent: 'north-america', hint: 'Has a mask-like face pattern!', fact: 'Raccoons have incredibly sensitive hands and "wash" their food before eating. They can remember solutions to tasks for 3 years!' },
            { emoji: 'üêª', name: 'Grizzly Bear', continent: 'north-america', hint: 'A large brown bear!', fact: 'Grizzly bears can eat 90 pounds of food per day before hibernation. Their claws can be 4 inches long!' },
            { emoji: 'ü¶´', name: 'Beaver', continent: 'north-america', hint: 'Builds dams in rivers!', fact: 'Beavers can hold their breath for 15 minutes! Their dams can be seen from space!' },

            // South America
            { emoji: 'ü¶ú', name: 'Macaw', continent: 'south-america', hint: 'A colorful tropical bird!', fact: 'Macaws can live for 50-80 years! They mate for life and can learn to speak over 100 words.' },
            { emoji: 'ü¶•', name: 'Sloth', continent: 'south-america', hint: 'The slowest mammal on Earth!', fact: 'Sloths move so slowly that algae grows on their fur! They sleep 15-20 hours a day.' },
            { emoji: 'üêÜ', name: 'Jaguar', continent: 'south-america', hint: 'A spotted big cat of the rainforest!', fact: 'Jaguars have the strongest bite of all big cats. They love swimming and hunting in water!' },
            { emoji: 'ü¶ô', name: 'Llama', continent: 'south-america', hint: 'Related to camels, lives in mountains!', fact: 'Llamas were used by the Inca civilization for thousands of years. They hum to communicate!' },
            { emoji: 'üêí', name: 'Capuchin Monkey', continent: 'south-america', hint: 'A clever monkey from the rainforest!', fact: 'Capuchins use tools and can be trained to help people with disabilities. They\'re one of the smartest primates!' },

            // Oceania
            { emoji: 'ü¶ò', name: 'Kangaroo', continent: 'oceania', hint: 'Hops around and has a pouch!', fact: 'Baby kangaroos (joeys) are the size of a jellybean when born! Kangaroos can\'t walk backwards.' },
            { emoji: 'üê®', name: 'Koala', continent: 'oceania', hint: 'Sleeps in eucalyptus trees!', fact: 'Koalas sleep up to 22 hours a day! They have fingerprints almost identical to humans.' },
            { emoji: 'ü¶Ü', name: 'Platypus', continent: 'oceania', hint: 'Has a duck bill and lays eggs!', fact: 'Platypus males have venomous spurs on their feet! They\'re one of only 5 mammals that lay eggs.' },
            { emoji: 'üêä', name: 'Saltwater Crocodile', continent: 'oceania', hint: 'The largest living reptile!', fact: 'Saltwater crocs can grow over 20 feet long and live 70+ years. They\'ve been around since dinosaur times!' },
            { emoji: 'ü¶é', name: 'Frilled Lizard', continent: 'oceania', hint: 'Has a big frill around its neck!', fact: 'When scared, frilled lizards spread their frill, open their mouth, and run on two legs!' },

            // Europe
            { emoji: 'ü¶î', name: 'Hedgehog', continent: 'europe', hint: 'A small spiny mammal!', fact: 'Hedgehogs have about 5,000 spines! When born, their spines are soft and covered by skin.' },
            { emoji: 'ü¶å', name: 'Red Deer', continent: 'europe', hint: 'Has impressive antlers!', fact: 'Male red deer shed and regrow their antlers every year. Antlers can grow an inch per day!' },
            { emoji: 'üê∫', name: 'Gray Wolf', continent: 'europe', hint: 'Lives and hunts in packs!', fact: 'Wolves can travel 30 miles in a single day! They communicate through howls that can be heard 10 miles away.' },
            { emoji: 'ü¶°', name: 'Badger', continent: 'europe', hint: 'Lives in underground tunnels!', fact: 'Badger tunnels (setts) can be hundreds of years old and have multiple entrances!' },
            { emoji: 'ü¶â', name: 'Eurasian Eagle-Owl', continent: 'europe', hint: 'A huge owl with orange eyes!', fact: 'Eagle-owls can rotate their heads 270 degrees and have wingspans of 6 feet!' },

            // Antarctica
            { emoji: 'üêß', name: 'Emperor Penguin', continent: 'antarctica', hint: 'Lives in the coldest place on Earth!', fact: 'Emperor penguins can dive 1,800 feet deep and hold their breath for 20 minutes!' },
            { emoji: 'ü¶≠', name: 'Leopard Seal', continent: 'antarctica', hint: 'A fierce Antarctic predator!', fact: 'Leopard seals are named for their spotted coat. They\'re one of the top predators in Antarctica!' },
        ];

        // Game state
        let score = 0;
        let streak = 0;
        let maxStreak = 0;
        let correct = 0;
        let wrong = 0;
        let currentAnimal = null;
        let questionNumber = 0;
        let totalQuestions = 15;
        let gameMode = 'explorer';
        let timeLeft = 0;
        let timerInterval = null;
        let gameActive = false;
        let usedAnimals = [];
        let unlockedBadges = new Set();
        let continentCorrects = {};

        // DOM elements
        const scoreEl = document.getElementById('score');
        const streakEl = document.getElementById('streak');
        const timerEl = document.getElementById('timer');
        const animalEmojiEl = document.getElementById('animalEmoji');
        const animalNameEl = document.getElementById('animalName');
        const animalHintEl = document.getElementById('animalHint');
        const questionNumEl = document.getElementById('questionNum');
        const factCardEl = document.getElementById('factCard');
        const factTextEl = document.getElementById('factText');
        const progressTextEl = document.getElementById('progressText');
        const progressFillEl = document.getElementById('progressFill');
        const comboPopupEl = document.getElementById('comboPopup');

        // Initialize game
        function init() {
            document.querySelectorAll('.continent').forEach(el => {
                el.addEventListener('click', handleContinentClick);
            });

            document.getElementById('startBtn').addEventListener('click', startGame);
            document.getElementById('playAgainBtn').addEventListener('click', startGame);
            document.getElementById('changeModeBtn').addEventListener('click', showStartScreen);

            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.addEventListener('click', () => selectMode(btn.dataset.mode));
            });

            document.querySelectorAll('.btn-secondary[data-mode]').forEach(btn => {
                btn.addEventListener('click', () => {
                    selectMode(btn.dataset.mode);
                    startGame();
                });
            });
        }

        function selectMode(mode) {
            gameMode = mode;
            document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
            document.querySelector(`.mode-btn[data-mode="${mode}"]`)?.classList.add('active');

            if (mode === 'timed') {
                totalQuestions = 20;
                timeLeft = 120;
            } else if (mode === 'expert') {
                totalQuestions = 25;
            } else {
                totalQuestions = 15;
            }
        }

        function startGame() {
            initAudio();
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('gameOverScreen').classList.add('hidden');

            // Reset state
            score = 0;
            streak = 0;
            maxStreak = 0;
            correct = 0;
            wrong = 0;
            questionNumber = 0;
            usedAnimals = [];
            continentCorrects = {};
            gameActive = true;

            updateUI();
            hideFact();

            if (gameMode === 'timed') {
                timeLeft = 120;
                startTimer();
            } else {
                timerEl.textContent = '--:--';
            }

            nextAnimal();
        }

        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);

            timerInterval = setInterval(() => {
                timeLeft--;
                const mins = Math.floor(timeLeft / 60);
                const secs = timeLeft % 60;
                timerEl.textContent = `${mins}:${secs.toString().padStart(2, '0')}`;

                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
        }

        function nextAnimal() {
            if (questionNumber >= totalQuestions) {
                endGame();
                return;
            }

            // Get random animal not yet used
            let availableAnimals = animals.filter(a => !usedAnimals.includes(a.name));

            // In expert mode, prefer animals from less-answered continents
            if (gameMode === 'expert' && availableAnimals.length > 5) {
                const continentCounts = {};
                availableAnimals.forEach(a => {
                    continentCounts[a.continent] = (continentCounts[a.continent] || 0) + 1;
                });
            }

            if (availableAnimals.length === 0) {
                usedAnimals = [];
                availableAnimals = animals;
            }

            currentAnimal = availableAnimals[Math.floor(Math.random() * availableAnimals.length)];
            usedAnimals.push(currentAnimal.name);

            questionNumber++;

            // Update UI
            animalEmojiEl.textContent = currentAnimal.emoji;
            animalNameEl.textContent = currentAnimal.name;
            animalHintEl.textContent = gameMode === 'expert' ? 'No hints in Expert mode!' : currentAnimal.hint;
            questionNumEl.textContent = `${questionNumber}/${totalQuestions}`;
            progressTextEl.textContent = `${questionNumber - 1}/${totalQuestions}`;
            progressFillEl.style.width = `${((questionNumber - 1) / totalQuestions) * 100}%`;

            hideFact();

            // Remove any highlights
            document.querySelectorAll('.continent').forEach(el => {
                el.classList.remove('highlight', 'correct', 'wrong');
            });
        }

        function handleContinentClick(e) {
            if (!gameActive || !currentAnimal) return;

            const clickedContinent = e.target.id;
            const correctContinent = currentAnimal.continent;

            if (clickedContinent === correctContinent) {
                handleCorrect(e.target);
            } else {
                handleWrong(e.target, correctContinent);
            }
        }

        function handleCorrect(element) {
            playSound('correct');
            element.classList.add('correct');

            correct++;
            streak++;
            maxStreak = Math.max(maxStreak, streak);

            // Score calculation
            let points = 100;
            points += streak * 20; // Streak bonus
            if (gameMode === 'expert') points *= 1.5;
            if (gameMode === 'timed') points += Math.floor(timeLeft / 10) * 5; // Time bonus

            score += Math.floor(points);

            // Track continent
            continentCorrects[currentAnimal.continent] = (continentCorrects[currentAnimal.continent] || 0) + 1;

            // Check achievements
            checkAchievements();

            // Show combo for streaks
            if (streak >= 3) {
                showCombo(streak);
                playSound('combo');
            }

            // Show fact
            showFact(currentAnimal.fact);

            updateUI();

            // Next question after delay
            setTimeout(() => {
                nextAnimal();
            }, 2000);
        }

        function handleWrong(element, correctContinent) {
            playSound('wrong');
            element.classList.add('wrong');

            wrong++;
            streak = 0;

            // Highlight correct answer
            document.getElementById(correctContinent).classList.add('highlight');

            // Show fact anyway
            showFact(currentAnimal.fact + ` They live in ${formatContinent(correctContinent)}!`);

            updateUI();

            setTimeout(() => {
                nextAnimal();
            }, 2500);
        }

        function formatContinent(id) {
            const names = {
                'north-america': 'North America',
                'south-america': 'South America',
                'europe': 'Europe',
                'africa': 'Africa',
                'asia': 'Asia',
                'oceania': 'Oceania/Australia',
                'antarctica': 'Antarctica'
            };
            return names[id] || id;
        }

        function showFact(text) {
            factTextEl.textContent = text;
            factCardEl.classList.add('show');
        }

        function hideFact() {
            factCardEl.classList.remove('show');
        }

        function showCombo(count) {
            const messages = {
                3: 'üî• Nice Streak!',
                5: 'üî•üî• On Fire!',
                7: 'üí• Unstoppable!',
                10: 'üåü LEGENDARY!'
            };

            let msg = messages[count];
            if (!msg) {
                if (count > 10) msg = 'üåüüåü AMAZING!';
                else if (count > 7) msg = 'üí• Incredible!';
                else if (count > 5) msg = 'üî•üî• Hot!';
                else msg = `üî• ${count}x Streak!`;
            }

            comboPopupEl.textContent = msg;
            comboPopupEl.classList.remove('show');
            void comboPopupEl.offsetWidth; // Trigger reflow
            comboPopupEl.classList.add('show');
        }

        function checkAchievements() {
            // First correct
            if (correct === 1 && !unlockedBadges.has('first')) {
                unlockBadge('first');
            }

            // Streak 5
            if (streak >= 5 && !unlockedBadges.has('streak5')) {
                unlockBadge('streak5');
            }

            // Streak 10
            if (streak >= 10 && !unlockedBadges.has('streak10')) {
                unlockBadge('streak10');
            }

            // Africa expert (5 correct from Africa)
            if ((continentCorrects['africa'] || 0) >= 5 && !unlockedBadges.has('africa')) {
                unlockBadge('africa');
            }

            // Speed demon (answer in timed mode with lots of time left)
            if (gameMode === 'timed' && timeLeft > 100 && correct >= 5 && !unlockedBadges.has('speed')) {
                unlockBadge('speed');
            }
        }

        function unlockBadge(id) {
            unlockedBadges.add(id);
            const badge = document.getElementById(`badge-${id}`);
            if (badge) {
                badge.classList.add('unlocked');
                playSound('achievement');
            }
        }

        function updateUI() {
            scoreEl.textContent = score;
            streakEl.textContent = streak;
        }

        function endGame() {
            gameActive = false;
            if (timerInterval) clearInterval(timerInterval);

            // Check perfect round
            if (wrong === 0 && correct >= 10) {
                unlockBadge('perfect');
            }

            // Check globe trotter (at least one from each continent)
            const continentsVisited = Object.keys(continentCorrects).length;
            if (continentsVisited >= 5) {
                unlockBadge('globe');
            }

            playSound('gameover');

            // Update game over screen
            const accuracy = correct + wrong > 0 ? Math.round((correct / (correct + wrong)) * 100) : 0;

            document.getElementById('finalScore').textContent = score;
            document.getElementById('finalCorrect').textContent = correct;
            document.getElementById('finalStreak').textContent = maxStreak;
            document.getElementById('finalAccuracy').textContent = accuracy + '%';

            // Set title and emoji based on performance
            const titleEl = document.getElementById('gameOverTitle');
            const emojiEl = document.getElementById('gameOverEmoji');

            if (accuracy >= 90) {
                titleEl.textContent = 'Amazing!';
                emojiEl.textContent = 'üèÜ';
            } else if (accuracy >= 70) {
                titleEl.textContent = 'Great Job!';
                emojiEl.textContent = 'üéâ';
            } else if (accuracy >= 50) {
                titleEl.textContent = 'Good Effort!';
                emojiEl.textContent = 'üëç';
            } else {
                titleEl.textContent = 'Keep Exploring!';
                emojiEl.textContent = 'üåç';
            }

            document.getElementById('gameOverScreen').classList.remove('hidden');
        }

        function showStartScreen() {
            document.getElementById('gameOverScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
        }

        // Initialize
        init();
    </script>
</body>

</html>
